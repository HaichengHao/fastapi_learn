from aiomysql.sa import create_enginefrom aiomysql.sa import create_enginefrom aiomysql.sa import create_enginefrom aiomysql.sa import create_engine

# 数据库引擎
任何sqlalchemy应用程序的开始都是一个名为Engine,次对象充当连接到特定数据库的中心源  
提供工厂和称为connectionpool(连接池)，对于这些数据库连接，引擎通常是一个只为特定  
数据库创建一次的全局对象，并使用一个URL字符串进行配置，该字符串将描述如何连接到数据库主机或后端  

**总体结构如下**  
![](结构.svg)

- dialect :数据库


sqlalchemy使用create_engine()函数从URL生成一个数据库引擎对象,比如
```python
engine = create_enginn(r'postgresql+asyncpg://dbusername:dbpwd@host:port/dbname')
```
其实组成就是 dialect+driver://username:pwd@host:port/database
注意⚠️:你必须安装自己项目需要的数据库驱动库
**一些参数**
- echo=False 如果为真，引擎将记录所有语句及repr()其参数列表的默认日志处理程序
- future 使用2.0样式引擎和连接接口
- logging_name 在sqlalchemy.engine记录器中生成的日志记录的name字段中使用的字符串标识符
- pool_size=5 连接池的的大小
- pool_recycle=3600 设置时间以限制数据库自动断开
- pool_timeout 连接的超时时间，默认为30秒



---
## 支持的数据库

1. SQLite
```python
# unix/mac 
engine = create_engine('sqlite:////absolute/path/to/foo.db')
#windows
engine = creata_engine('sqlite:///D:\\path\\to\\foo.db')


```
2. Mysql
```python
#default
engine=create_engine('mysql://name:pwd@host:port/dbname')
#mysqlclient
engine=create_engine('mysq+mysqldb://name:pwd@@host:port/dbname')

#pymysql
engine=create_engine('mysql+pymysql://name:pwd@host:port/dbname')

```

3. PostgreSQL
```python
engine=create_engine('postgresql+asyncpg://name:pwd@host:port/dbname')
```