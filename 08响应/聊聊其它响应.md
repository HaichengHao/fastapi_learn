✅ **完全正确！你的观察非常准确**，这其实不是 bug，而是 **浏览器 + Swagger UI 的正常行为**。

---

### 🧠 为什么直接访问能跳转，而 Swagger UI 不行？

| 方式 | 行为 | 原因 |
|------|------|------|
| **直接在浏览器地址栏输入**<br>`http://127.0.0.1:8099/get_redirect` | ✅ 成功跳转到 B站 | 这是 **浏览器导航（navigation）**，会自动跟随 `302` 重定向 |
| **在 Swagger UI 点击 "Execute"** | ❌ 显示 `Failed to fetch` 或 CORS 错误 | 这是 **前端 JavaScript 发起的 AJAX 请求（`fetch()`）**，受 **CORS 和重定向策略限制** |

---

### 🔍 深入解释

#### 1. **浏览器导航 vs AJAX 请求**
- **导航请求**（地址栏、`<a>` 标签）：  
  浏览器会自动处理 `3xx` 重定向，最终显示目标页面（如 bilibili.com）。
- **AJAX 请求**（Swagger、axios、fetch）：  
  浏览器 **不会自动跳转**，而是把重定向当作一个“响应”，但：
  - 如果跨域（比如跳到 `https://www.bilibili.com`），且没有正确 CORS 头 → **被拦截**
  - 即使同域，很多工具也不会“跟随”重定向，而是直接报错或返回 `302`

> 💡 Swagger UI 的 “Execute” 按钮本质是用 `fetch(url)` 调用你的 API，它期望返回 JSON 数据，而不是跳转！

---

#### 2. **重定向到外部网站（bilibili.com）是跨域的！**
你的接口返回：
```http
HTTP/1.1 302 Found
Location: https://www.bilibili.com/
```

当 Swagger（运行在 `http://127.0.0.1:8099`）收到这个响应时：
- 浏览器发现下一步要跳到 `https://www.bilibili.com`（不同源）
- 但 bilibili.com **没有设置 CORS 头允许你的 localhost 访问**
- 所以浏览器 **阻止了这次重定向**，并报错：`CORS error` 或 `Network Failure`

> ⚠️ 这是浏览器的安全机制，**你无法控制第三方网站（如 bilibili）的 CORS 策略**。

---

### ✅ 所以结论是：

> **Swagger UI 本来就不适合测试 `RedirectResponse` 到外部网站的接口！**

它设计用来测试 **返回 JSON / 数据的 API**，而不是导航型重定向。

---

### ✅ 正确的测试方式

| 场景 | 推荐测试方法 |
|------|-------------|
| 测试重定向是否生效 | ✅ 直接在浏览器地址栏访问 `/get_redirect` |
| 测试 API 返回数据 | ✅ 用 Swagger 测试 `/get_str`、`/gethtml` 等 |
| 自动化测试重定向 | ✅ 用 `curl` 查看响应头：<br>`curl -I http://127.0.0.1:8099/get_redirect` |

```bash
$ curl -I http://127.0.0.1:8099/get_redirect
HTTP/1.1 302 Found
location: https://www.bilibili.com/
...
```

---

### 🛠 如果你非要让 Swagger “看起来成功”

你可以改用 **返回一个 JSON 提示**，而不是真正重定向（仅用于调试）：

```python
@app.get('/get_redirect_debug')
async def get_redirect_debug():
    return {"redirect_url": "https://www.bilibili.com/"}
```

但这只是模拟，**真正的重定向必须靠浏览器导航触发**。

---

### ✅ 总结

| 问题 | 答案 |
|------|------|
| 为什么直接访问能跳转？ | 因为是浏览器导航，自动跟随 302 |
| 为什么 Swagger 失败？ | 因为是 AJAX 请求，遇到跨域重定向被浏览器拦截 |
| 是代码写错了吗？ | ❌ 不是！你的代码完全正确 |
| 如何正确测试重定向？ | ✅ 用浏览器地址栏 or `curl -I` |

---

所以放心吧，你的 FastAPI 代码 **没有任何问题**，这是 **前端调用方式和浏览器安全策略的正常表现** 😊

继续加油！🚀