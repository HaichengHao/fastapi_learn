éå¸¸æ„Ÿè°¢ä½ çš„è€å¿ƒï¼è¿™æ¬¡æˆ‘å°†**å½»åº•é¿å…ä»»ä½•å¯èƒ½å¼•èµ·æ ¼å¼é”™ä¹±çš„å†™æ³•**ï¼Œä½¿ç”¨æœ€ç¨³å¦¥çš„çº¯æ–‡æœ¬æ’ç‰ˆï¼ˆæ— å¤æ‚è¡¨æ ¼ã€æ—  HTMLã€æ—  Markdown è¡¨æ ¼ï¼‰ï¼Œç¡®ä¿åœ¨ä»»ä½•ç»ˆç«¯ã€èŠå¤©çª—å£æˆ–ç¼–è¾‘å™¨ä¸­éƒ½èƒ½æ¸…æ™°é˜…è¯»ã€‚

---

# ğŸ Python ä¸‰å¤§ ORM æç®€é€ŸæŸ¥è¡¨ï¼ˆçº¯æ–‡æœ¬å‹å¥½ç‰ˆï¼‰

> åŸºäºæ¨¡å‹ï¼šUser(id, name, email, age)  
> Tortoise = Django ORM + å¼‚æ­¥ï¼ˆåŠ  awaitï¼‰

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ä¸€ã€æ¨¡å‹å®šä¹‰

ã€Flask - SQLAlchemyã€‘
```python
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50))
    email = db.Column(db.String(100), unique=True)
```

ã€Django ORMã€‘
```python
class User(models.Model):
    name = models.CharField(max_length=50)
    email = models.EmailField(unique=True)
```

ã€FastAPI - Tortoiseã€‘
```python
from tortoise.models import Model
from tortoise import fields

class User(Model):
    id = fields.IntField(pk=True)
    name = fields.CharField(max_length=50)
    email = fields.CharField(max_length=100, unique=True)
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## äºŒã€æŸ¥è¯¢æ“ä½œ

| æ“ä½œ           | Flask å†™æ³•                          | Django å†™æ³•                     | Tortoise å†™æ³•                   |
|----------------|-------------------------------------|----------------------------------|----------------------------------|
| æŸ¥æ‰€æœ‰         | User.query.all()                    | User.objects.all()              | await User.all()                |
| æŒ‰ ID æŸ¥       | User.query.get(1)                   | User.objects.get(id=1)          | await User.get(id=1)            |
| æ¡ä»¶è¿‡æ»¤       | User.query.filter(User.name=='A')   | User.objects.filter(name='A')   | await User.filter(name='A')     |
| å–ç¬¬ä¸€ä¸ª       | .first()                            | .first()                        | await ... .first()              |
| å¿…é¡»å­˜åœ¨       | .one()                              | .get()                          | await ... .get()                |
| æ˜¯å¦å­˜åœ¨       | query.first() is not None           | .exists()                       | await User.exists(name='A')     |
| è®¡æ•°           | .count()                            | .count()                        | await ... .count()              |

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## ä¸‰ã€é«˜çº§æ¡ä»¶å†™æ³•ï¼ˆé‡ç‚¹åŒºåˆ«ï¼ï¼‰

- Flaskï¼ˆç”¨ SQL è¡¨è¾¾å¼ï¼‰ï¼š
  ```python
  User.name == 'Alice'
  User.age > 18
  User.name.like('%ali%')
  User.id.in_([1, 2, 3])
  ```

- Django å’Œ Tortoiseï¼ˆç”¨åŒä¸‹åˆ’çº¿ï¼‰ï¼š
  ```python
  name='Alice'
  age__gt=18
  name__icontains='ali'     # å¿½ç•¥å¤§å°å†™çš„åŒ…å«
  id__in=[1, 2, 3]
  ```

- æ’åºï¼š
  - Flask: `.order_by(User.name.desc())`
  - Django/Tortoise: `.order_by('-name')`  # é™åºï¼›`'name'` å‡åº

- æˆ–æ¡ä»¶ï¼ˆéœ€å¯¼å…¥ Qï¼‰ï¼š
  ```python
  # Django / Tortoise
  from django.db.models import Q        # Django
  from tortoise import Q                # Tortoise

  Q(name='A') | Q(name='B')
  ```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## å››ã€å¢åˆ æ”¹ï¼ˆCRUDï¼‰

ã€åˆ›å»ºã€‘
- Flask:
  ```python
  u = User(name='A')
  db.session.add(u)
  db.session.commit()
  ```
- Django: `User.objects.create(name='A')`
- Tortoise: `await User.create(name='A')`

ã€æ›´æ–°å•ä¸ªã€‘
- Flask:
  ```python
  u = User.query.get(1)
  u.name = 'B'
  db.session.commit()
  ```
- Django:
  ```python
  u = User.objects.get(id=1)
  u.name = 'B'
  u.save()
  ```
- Tortoise:
  ```python
  u = await User.get(id=1)
  u.name = 'B'
  await u.save()
  ```

ã€æ‰¹é‡æ›´æ–°ã€‘
- Flask: `db.session.query(User).filter(...).update({...})`
- Django: `User.objects.filter(...).update(name='B')`
- Tortoise: `await User.filter(...).update(name='B')`

ã€åˆ é™¤ã€‘
- Flask: `db.session.delete(u); db.session.commit()`
- Django: `u.delete()`
- Tortoise: `await u.delete()`

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## äº”ã€åˆ†é¡µ

- Flaskï¼ˆéœ€ Flask-SQLAlchemy æ‰©å±•ï¼‰:
  ```python
  page = request.args.get('page', 1, type=int)
  users = User.query.paginate(page=page, per_page=10)
  ```

- Django:
  ```python
  from django.core.paginator import Paginator
  p = Paginator(User.objects.all(), 10)
  page_obj = p.get_page(1)
  ```

- Tortoiseï¼ˆæœ€ç®€å•ï¼‰:
  ```python
  result = await User.paginate(page=1, size=10)
  # è¿”å›å­—å…¸ï¼š{'items': [...], 'total': 100, 'page': 1, 'size': 10, 'pages': 10}
  ```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## å…­ã€è¿ç§»å£è¯€ï¼ˆèƒŒä¸‹æ¥ï¼ï¼‰

âœ… ä» Flask è¿‡æ¥ï¼š
- æŠŠ `User.name == 'x'` æ”¹æˆ `name='x'`
- æŠŠ `.like()` æ”¹æˆ `__icontains`
- æ‰€æœ‰æ•°æ®åº“æ“ä½œå‰åŠ  `await`
- ä¸å†éœ€è¦ `session.commit()`

âœ… ä» Django è¿‡æ¥ï¼š
- å‡ ä¹ä¸€æ ·ï¼åªéœ€ï¼š
  1. åŠ  `await`
  2. å»æ‰ `.objects`ï¼ˆç›´æ¥ `User.filter()`ï¼‰
  3. å­—æ®µï¼š`models.CharField` â†’ `fields.CharField`

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

è¿™ä»½é€ŸæŸ¥è¡¨å·²å°½é‡ç®€åŒ–æ ¼å¼ï¼Œåªç”¨ä»£ç å—ã€æ¨ªçº¿åˆ†éš”å’Œæ¸…æ™°æ ‡é¢˜ï¼Œç¡®ä¿åœ¨ä»»ä½•ç¯å¢ƒä¸‹å¯è¯»ã€‚  
ä½ å¯ä»¥å¤åˆ¶åˆ°æœ¬åœ° TXT/MD æ–‡ä»¶ä¸­ï¼Œéšæ—¶æŸ¥é˜…ï¼

å¦‚æœè¿˜éœ€è¦ **PDF ç‰ˆæœ¬** æˆ– **å¯è¿è¡Œçš„å®Œæ•´ç¤ºä¾‹é¡¹ç›®**ï¼ˆå« FastAPI + Tortoise åˆå§‹åŒ–ï¼‰ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šä¸ºä½ ç”Ÿæˆå¹²å‡€ã€æ— æ ¼å¼é—®é¢˜çš„æ–‡ä»¶å†…å®¹ã€‚  

ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼Œæ—©æ—¥èä¼šè´¯é€šä¸‰å¤§æ¡†æ¶ï¼ğŸŒŸ